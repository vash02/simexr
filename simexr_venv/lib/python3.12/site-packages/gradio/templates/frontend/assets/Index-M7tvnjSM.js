import{b as pe,B as Be,c as ne,E as Ie,I as Me,F as Se}from"./FullscreenButton-CY3DenSN.js";import{S as qe}from"./StreamingBar-DwBbQPSd.js";import"./index-6iIxEka4.js";import{r as Y}from"./DownloadLink-Clun45p7.js";import"./MarkdownCode-B_oSAavQ.js";import"./prism-python-BTLJbtOb.js";import"./i18n-Dub1g69U.js";import"./svelte/svelte.js";const{SvelteComponent:ze,add_flush_callback:Ee,append:L,assign:Fe,attr:k,bind:Ne,binding_callbacks:ie,check_outros:se,create_component:q,destroy_component:z,destroy_each:ae,detach:B,element:j,empty:oe,ensure_array_like:D,flush:w,get_spread_object:Pe,get_spread_update:je,group_outros:ue,init:Ce,insert:I,listen:C,mount_component:E,run_all:Le,safe_not_equal:We,set_data:Ae,set_style:Z,space:P,src_url_equal:G,text:De,toggle_class:S,transition_in:v,transition_out:p}=window.__gradio__svelte__internal,{onMount:xe}=window.__gradio__svelte__internal;function $(t,e,n){const l=t.slice();return l[33]=e[n],l[35]=n,l}function y(t,e,n){const l=t.slice();return l[33]=e[n],l[35]=n,l}function Ge(t){let e,n,l,s,a,i,f,_,b;n=new Me({props:{$$slots:{default:[Je]},$$scope:{ctx:t}}});let g=D(t[15]?t[15]?.annotations:[]),c=[];for(let r=0;r<g.length;r+=1)c[r]=ee(y(t,g,r));let h=t[6]&&t[15]&&le(t);return{c(){e=j("div"),q(n.$$.fragment),l=P(),s=j("img"),i=P();for(let r=0;r<c.length;r+=1)c[r].c();f=P(),h&&h.c(),_=oe(),k(s,"class","base-image svelte-303fln"),G(s.src,a=t[15]?t[15].image.url:null)||k(s,"src",a),k(s,"alt","the base file that is annotated"),S(s,"fit-height",t[7]&&!t[18]),k(e,"class","image-container svelte-303fln")},m(r,u){I(r,e,u),E(n,e,null),L(e,l),L(e,s),L(e,i);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(e,null);t[26](e),I(r,f,u),h&&h.m(r,u),I(r,_,u),b=!0},p(r,u){const m={};if(u[0]&278528|u[1]&64&&(m.$$scope={dirty:u,ctx:r}),n.$set(m),(!b||u[0]&32768&&!G(s.src,a=r[15]?r[15].image.url:null))&&k(s,"src",a),(!b||u[0]&262272)&&S(s,"fit-height",r[7]&&!r[18]),u[0]&360976){g=D(r[15]?r[15]?.annotations:[]);let d;for(d=0;d<g.length;d+=1){const M=y(r,g,d);c[d]?c[d].p(M,u):(c[d]=ee(M),c[d].c(),c[d].m(e,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=g.length}r[6]&&r[15]?h?h.p(r,u):(h=le(r),h.c(),h.m(_.parentNode,_)):h&&(h.d(1),h=null)},i(r){b||(v(n.$$.fragment,r),b=!0)},o(r){p(n.$$.fragment,r),b=!1},d(r){r&&(B(e),B(f),B(_)),z(n),ae(c,r),t[26](null),h&&h.d(r)}}}function He(t){let e,n;return e=new Ie({props:{size:"large",unpadded_box:!0,$$slots:{default:[Ke]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(l,s){E(e,l,s),n=!0},p(l,s){const a={};s[1]&64&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){z(e,l)}}}function x(t){let e,n;return e=new Se({props:{fullscreen:t[18]}}),e.$on("fullscreen",t[25]),{c(){q(e.$$.fragment)},m(l,s){E(e,l,s),n=!0},p(l,s){const a={};s[0]&262144&&(a.fullscreen=l[18]),e.$set(a)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){z(e,l)}}}function Je(t){let e,n,l=t[14]&&x(t);return{c(){l&&l.c(),e=oe()},m(s,a){l&&l.m(s,a),I(s,e,a),n=!0},p(s,a){s[14]?l?(l.p(s,a),a[0]&16384&&v(l,1)):(l=x(s),l.c(),v(l,1),l.m(e.parentNode,e)):l&&(ue(),p(l,1,1,()=>{l=null}),se())},i(s){n||(v(l),n=!0)},o(s){p(l),n=!1},d(s){s&&B(e),l&&l.d(s)}}}function ee(t){let e,n,l,s;return{c(){e=j("img"),k(e,"alt",n="segmentation mask identifying "+t[4]+" within the uploaded file"),k(e,"class","mask fit-height svelte-303fln"),G(e.src,l=t[33].image.url)||k(e,"src",l),k(e,"style",s=t[9]&&t[33].label in t[9]?null:`filter: hue-rotate(${Math.round(t[35]*360/t[15]?.annotations.length)}deg);`),S(e,"fit-height",!t[18]),S(e,"active",t[16]==t[33].label),S(e,"inactive",t[16]!=t[33].label&&t[16]!=null)},m(a,i){I(a,e,i)},p(a,i){i[0]&16&&n!==(n="segmentation mask identifying "+a[4]+" within the uploaded file")&&k(e,"alt",n),i[0]&32768&&!G(e.src,l=a[33].image.url)&&k(e,"src",l),i[0]&33280&&s!==(s=a[9]&&a[33].label in a[9]?null:`filter: hue-rotate(${Math.round(a[35]*360/a[15]?.annotations.length)}deg);`)&&k(e,"style",s),i[0]&262144&&S(e,"fit-height",!a[18]),i[0]&98304&&S(e,"active",a[16]==a[33].label),i[0]&98304&&S(e,"inactive",a[16]!=a[33].label&&a[16]!=null)},d(a){a&&B(e)}}}function le(t){let e,n=D(t[15].annotations),l=[];for(let s=0;s<n.length;s+=1)l[s]=te($(t,n,s));return{c(){e=j("div");for(let s=0;s<l.length;s+=1)l[s].c();k(e,"class","legend svelte-303fln")},m(s,a){I(s,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,a){if(a[0]&3703296){n=D(s[15].annotations);let i;for(i=0;i<n.length;i+=1){const f=$(s,n,i);l[i]?l[i].p(f,a):(l[i]=te(f),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&B(e),ae(l,s)}}}function te(t){let e,n=t[33].label+"",l,s,a,i;function f(){return t[27](t[33])}function _(){return t[28](t[33])}function b(){return t[31](t[35],t[33])}return{c(){e=j("button"),l=De(n),s=P(),k(e,"class","legend-item svelte-303fln"),Z(e,"background-color",t[9]&&t[33].label in t[9]?t[9][t[33].label]+"88":`hsla(${Math.round(t[35]*360/t[15].annotations.length)}, 100%, 50%, 0.3)`)},m(g,c){I(g,e,c),L(e,l),L(e,s),a||(i=[C(e,"mouseover",f),C(e,"focus",_),C(e,"mouseout",t[29]),C(e,"blur",t[30]),C(e,"click",b)],a=!0)},p(g,c){t=g,c[0]&32768&&n!==(n=t[33].label+"")&&Ae(l,n),c[0]&33280&&Z(e,"background-color",t[9]&&t[33].label in t[9]?t[9][t[33].label]+"88":`hsla(${Math.round(t[35]*360/t[15].annotations.length)}, 100%, 50%, 0.3)`)},d(g){g&&B(e),a=!1,Le(i)}}}function Ke(t){let e,n;return e=new ne({}),{c(){q(e.$$.fragment)},m(l,s){E(e,l,s),n=!0},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){z(e,l)}}}function Oe(t){let e,n,l,s,a,i,f,_;const b=[{autoscroll:t[3].autoscroll},{i18n:t[3].i18n},t[13]];let g={};for(let u=0;u<b.length;u+=1)g=Fe(g,b[u]);e=new qe({props:g}),l=new Be({props:{show_label:t[5],Icon:ne,label:t[4]||t[3].i18n("image.image")}});const c=[He,Ge],h=[];function r(u,m){return u[15]==null?0:1}return i=r(t),f=h[i]=c[i](t),{c(){q(e.$$.fragment),n=P(),q(l.$$.fragment),s=P(),a=j("div"),f.c(),k(a,"class","container svelte-303fln")},m(u,m){E(e,u,m),I(u,n,m),E(l,u,m),I(u,s,m),I(u,a,m),h[i].m(a,null),_=!0},p(u,m){const d=m[0]&8200?je(b,[m[0]&8&&{autoscroll:u[3].autoscroll},m[0]&8&&{i18n:u[3].i18n},m[0]&8192&&Pe(u[13])]):{};e.$set(d);const M={};m[0]&32&&(M.show_label=u[5]),m[0]&24&&(M.label=u[4]||u[3].i18n("image.image")),l.$set(M);let F=i;i=r(u),i===F?h[i].p(u,m):(ue(),p(h[F],1,1,()=>{h[F]=null}),se(),f=h[i],f?f.p(u,m):(f=h[i]=c[i](u),f.c()),v(f,1),f.m(a,null))},i(u){_||(v(e.$$.fragment,u),v(l.$$.fragment,u),v(f),_=!0)},o(u){p(e.$$.fragment,u),p(l.$$.fragment,u),p(f),_=!1},d(u){u&&(B(n),B(s),B(a)),z(e,u),z(l,u),h[i].d()}}}function Qe(t){let e,n,l;function s(i){t[32](i)}let a={visible:t[2],elem_id:t[0],elem_classes:t[1],padding:!1,height:t[7],width:t[8],allow_overflow:!1,container:t[10],scale:t[11],min_width:t[12],$$slots:{default:[Oe]},$$scope:{ctx:t}};return t[18]!==void 0&&(a.fullscreen=t[18]),e=new pe({props:a}),ie.push(()=>Ne(e,"fullscreen",s)),{c(){q(e.$$.fragment)},m(i,f){E(e,i,f),l=!0},p(i,f){const _={};f[0]&4&&(_.visible=i[2]),f[0]&1&&(_.elem_id=i[0]),f[0]&2&&(_.elem_classes=i[1]),f[0]&128&&(_.height=i[7]),f[0]&256&&(_.width=i[8]),f[0]&1024&&(_.container=i[10]),f[0]&2048&&(_.scale=i[11]),f[0]&4096&&(_.min_width=i[12]),f[0]&516856|f[1]&64&&(_.$$scope={dirty:f,ctx:i}),!n&&f[0]&262144&&(n=!0,_.fullscreen=i[18],Ee(()=>n=!1)),e.$set(_)},i(i){l||(v(e.$$.fragment,i),l=!0)},o(i){p(e.$$.fragment,i),l=!1},d(i){z(e,i)}}}function Re(t,e,n){let{elem_id:l=""}=e,{elem_classes:s=[]}=e,{visible:a=!0}=e,{value:i=null}=e,f=null,_=null,{gradio:b}=e,{label:g=b.i18n("annotated_image.annotated_image")}=e,{show_label:c=!0}=e,{show_legend:h=!0}=e,{height:r}=e,{width:u}=e,{color_map:m}=e,{container:d=!0}=e,{scale:M=null}=e,{min_width:F=void 0}=e,H=null,{loading_status:T}=e,{show_fullscreen_button:U=!0}=e,J,W=!1,K=null;function O(o){n(16,H=o)}function Q(){n(16,H=null)}function V(o,A){b.dispatch("select",{value:g,index:o})}const re=({detail:o})=>{n(18,W=o)};function fe(o){ie[o?"unshift":"push"](()=>{J=o,n(17,J)})}const _e=o=>O(o.label),ce=o=>O(o.label),he=()=>Q(),me=()=>Q(),ge=(o,A)=>V(o,A.label);function be(o){W=o,n(18,W)}return t.$$set=o=>{"elem_id"in o&&n(0,l=o.elem_id),"elem_classes"in o&&n(1,s=o.elem_classes),"visible"in o&&n(2,a=o.visible),"value"in o&&n(22,i=o.value),"gradio"in o&&n(3,b=o.gradio),"label"in o&&n(4,g=o.label),"show_label"in o&&n(5,c=o.show_label),"show_legend"in o&&n(6,h=o.show_legend),"height"in o&&n(7,r=o.height),"width"in o&&n(8,u=o.width),"color_map"in o&&n(9,m=o.color_map),"container"in o&&n(10,d=o.container),"scale"in o&&n(11,M=o.scale),"min_width"in o&&n(12,F=o.min_width),"loading_status"in o&&n(13,T=o.loading_status),"show_fullscreen_button"in o&&n(14,U=o.show_fullscreen_button)},t.$$.update=()=>{if(t.$$.dirty[0]&29360136)if(i!==f&&(n(23,f=i),b.dispatch("change")),i){const o={image:i.image,annotations:i.annotations.map(N=>({image:N.image,label:N.label}))};n(15,_=o);const A=Y(o.image.url),de=Promise.all(o.annotations.map(N=>Y(N.image.url))),R=Promise.all([A,de]);n(24,K=R),R.then(([N,we])=>{if(K!==R)return;const ke={image:{...o.image,url:N??void 0},annotations:o.annotations.map((X,ve)=>({...X,image:{...X.image,url:we[ve]??void 0}}))};n(15,_=ke)})}else n(15,_=null)},[l,s,a,b,g,c,h,r,u,m,d,M,F,T,U,_,H,J,W,O,Q,V,i,f,K,re,fe,_e,ce,he,me,ge,be]}class el extends ze{constructor(e){super(),Ce(this,e,Re,Qe,We,{elem_id:0,elem_classes:1,visible:2,value:22,gradio:3,label:4,show_label:5,show_legend:6,height:7,width:8,color_map:9,container:10,scale:11,min_width:12,loading_status:13,show_fullscreen_button:14},null,[-1,-1])}get elem_id(){return this.$$.ctx[0]}set elem_id(e){this.$$set({elem_id:e}),w()}get elem_classes(){return this.$$.ctx[1]}set elem_classes(e){this.$$set({elem_classes:e}),w()}get visible(){return this.$$.ctx[2]}set visible(e){this.$$set({visible:e}),w()}get value(){return this.$$.ctx[22]}set value(e){this.$$set({value:e}),w()}get gradio(){return this.$$.ctx[3]}set gradio(e){this.$$set({gradio:e}),w()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),w()}get show_label(){return this.$$.ctx[5]}set show_label(e){this.$$set({show_label:e}),w()}get show_legend(){return this.$$.ctx[6]}set show_legend(e){this.$$set({show_legend:e}),w()}get height(){return this.$$.ctx[7]}set height(e){this.$$set({height:e}),w()}get width(){return this.$$.ctx[8]}set width(e){this.$$set({width:e}),w()}get color_map(){return this.$$.ctx[9]}set color_map(e){this.$$set({color_map:e}),w()}get container(){return this.$$.ctx[10]}set container(e){this.$$set({container:e}),w()}get scale(){return this.$$.ctx[11]}set scale(e){this.$$set({scale:e}),w()}get min_width(){return this.$$.ctx[12]}set min_width(e){this.$$set({min_width:e}),w()}get loading_status(){return this.$$.ctx[13]}set loading_status(e){this.$$set({loading_status:e}),w()}get show_fullscreen_button(){return this.$$.ctx[14]}set show_fullscreen_button(e){this.$$set({show_fullscreen_button:e}),w()}}export{el as default};
//# sourceMappingURL=Index-M7tvnjSM.js.map
