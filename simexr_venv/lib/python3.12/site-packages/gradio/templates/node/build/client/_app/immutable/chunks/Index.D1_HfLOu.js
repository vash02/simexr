import{SvelteComponent as Ve,init as Le,safe_not_equal as Me,element as O,space as Z,text as tt,claim_element as S,children as L,detach as v,claim_space as x,claim_text as nt,attr as w,set_style as Ne,insert_hydration as z,append_hydration as B,listen as G,set_data as lt,noop as pe,createEventDispatcher as st,create_component as le,claim_component as se,toggle_class as ne,mount_component as ie,transition_in as m,group_outros as ee,transition_out as y,check_outros as te,destroy_component as oe,onMount as Jt,tick as ke,empty as Ue,binding_callbacks as be,bind as Oe,add_flush_callback as Se,add_render_callback as Te,create_in_transition as Xt,set_input_value as ve,run_all as it,ensure_array_like as Je,destroy_each as jt,get_svelte_dataset as ot,create_bidirectional_transition as de,flush as H,assign as qt,get_spread_update as zt,get_spread_object as Ft}from"../../../svelte/svelte.js";import{fade as _e}from"../../../svelte/svelte-submodules.js";import{y as Gt,O as Kt,G as Qt,F as Wt,B as Yt,S as Zt}from"./2.DPLbyeoY.js";import{P as xt}from"./Plus.aV-xa-_T.js";import{T as $t}from"./Trash.D4IfxcH_.js";import{D as rt,c as en}from"./Dropdown.B4ss7qDp.js";/* empty css                                              */import{default as An}from"./Example.FcPgDijm.js";function tn(n){let e,t,s,r,l,i,f;return{c(){e=O("div"),t=O("button"),s=Z(),r=O("span"),l=tt(n[1]),this.h()},l(o){e=S(o,"DIV",{class:!0,style:!0});var c=L(e);t=S(c,"BUTTON",{role:!0,"aria-checked":!0,class:!0});var u=L(t);u.forEach(v),s=x(c),r=S(c,"SPAN",{});var d=L(r);l=nt(d,n[1]),d.forEach(v),c.forEach(v),this.h()},h(){w(t,"role","switch"),w(t,"aria-checked",n[0]),t.disabled=n[2],w(t,"class","svelte-1wr5wa"),w(e,"class","s s--slider svelte-1wr5wa"),Ne(e,"font-size","var(--font-size-sm)px")},m(o,c){z(o,e,c),B(e,t),B(e,s),B(e,r),B(r,l),i||(f=G(t,"click",n[3]),i=!0)},p(o,[c]){c&1&&w(t,"aria-checked",o[0]),c&4&&(t.disabled=o[2]),c&2&&lt(l,o[1])},i:pe,o:pe,d(o){o&&v(e),i=!1,f()}}}function nn(n,e,t){let{label:s}=e,{checked:r=!1}=e,{disabled:l=!1}=e;const i=st();function f(o){const u=o.target.getAttribute("aria-checked");t(0,r=u!=="true"),i("click",{checked:r})}return n.$$set=o=>{"label"in o&&t(1,s=o.label),"checked"in o&&t(0,r=o.checked),"disabled"in o&&t(2,l=o.disabled)},[r,s,l,f]}class ln extends Ve{constructor(e){super(),Le(this,e,nn,tn,Me,{label:1,checked:0,disabled:2})}}function Xe(n,e,t){const s=n.slice();return s[77]=e[t],s[78]=e,s[79]=t,s}function je(n){let e,t,s,r;const l=[on,sn],i=[];function f(o,c){return o[24]?0:1}return e=f(n),t=i[e]=l[e](n),{c(){t.c(),s=Ue()},l(o){t.l(o),s=Ue()},m(o,c){i[e].m(o,c),z(o,s,c),r=!0},p(o,c){let u=e;e=f(o),e===u?i[e].p(o,c):(ee(),y(i[u],1,1,()=>{i[u]=null}),te(),t=i[e],t?t.p(o,c):(t=i[e]=l[e](o),t.c()),m(t,1),t.m(s.parentNode,s))},i(o){r||(m(t),r=!0)},o(o){y(t),r=!1},d(o){o&&v(s),i[e].d(o)}}}function sn(n){let e,t,s,r,l;return t=new Qt({}),{c(){e=O("button"),le(t.$$.fragment),this.h()},l(i){e=S(i,"BUTTON",{class:!0,"aria-label":!0,"aria-roledescription":!0});var f=L(e);se(t.$$.fragment,f),f.forEach(v),this.h()},h(){w(e,"class","copy-button svelte-1hyf28w"),w(e,"aria-label","Copy"),w(e,"aria-roledescription","Copy text")},m(i,f){z(i,e,f),ie(t,e,null),s=!0,r||(l=G(e,"click",n[38]),r=!0)},p:pe,i(i){s||(m(t.$$.fragment,i),s=!0)},o(i){y(t.$$.fragment,i),s=!1},d(i){i&&v(e),oe(t),r=!1,l()}}}function on(n){let e,t,s,r;return t=new Wt({}),{c(){e=O("button"),le(t.$$.fragment),this.h()},l(l){e=S(l,"BUTTON",{class:!0,"aria-label":!0,"aria-roledescription":!0});var i=L(e);se(t.$$.fragment,i),i.forEach(v),this.h()},h(){w(e,"class","copy-button svelte-1hyf28w"),w(e,"aria-label","Copied"),w(e,"aria-roledescription","Text copied")},m(l,i){z(l,e,i),ie(t,e,null),r=!0},p:pe,i(l){r||(m(t.$$.fragment,l),l&&(s||Te(()=>{s=Xt(e,_e,{duration:300}),s.start()})),r=!0)},o(l){y(t.$$.fragment,l),r=!1},d(l){l&&v(e),oe(t)}}}function rn(n){let e;return{c(){e=tt(n[4])},l(t){e=nt(t,n[4])},m(t,s){z(t,e,s)},p(t,s){s[0]&16&&lt(e,t[4])},d(t){t&&v(e)}}}function qe(n){let e,t,s,r;function l(f){n[44](f)}let i={label:"Plain Text",disabled:n[28]||n[27]};return n[14]!==void 0&&(i.checked=n[14]),t=new ln({props:i}),be.push(()=>Oe(t,"checked",l)),t.$on("click",n[45]),{c(){e=O("div"),le(t.$$.fragment),this.h()},l(f){e=S(f,"DIV",{class:!0});var o=L(e);se(t.$$.fragment,o),o.forEach(v),this.h()},h(){w(e,"class","switch-container top-switch svelte-1hyf28w"),ne(e,"switch-disabled",n[28]||n[27])},m(f,o){z(f,e,o),ie(t,e,null),r=!0},p(f,o){const c={};o[0]&402653184&&(c.disabled=f[28]||f[27]),!s&&o[0]&16384&&(s=!0,c.checked=f[14],Se(()=>s=!1)),t.$set(c),(!r||o[0]&402653184)&&ne(e,"switch-disabled",f[28]||f[27])},i(f){r||(m(t.$$.fragment,f),r=!0)},o(f){y(t.$$.fragment,f),r=!1},d(f){f&&v(e),oe(t)}}}function an(n){let e,t,s,r,l,i,f,o=n[28]&&ze(),c=n[18]&&Fe(n);return{c(){e=O("div"),o&&o.c(),t=Z(),s=O("textarea"),r=Z(),c&&c.c(),this.h()},l(u){e=S(u,"DIV",{class:!0});var d=L(e);o&&o.l(d),t=x(d),s=S(d,"TEXTAREA",{"data-testid":!0,placeholder:!0,rows:!0,class:!0}),L(s).forEach(v),r=x(d),c&&c.l(d),d.forEach(v),this.h()},h(){w(s,"data-testid","textbox"),w(s,"placeholder",n[3]),w(s,"rows",5),s.disabled=n[6],w(s,"class","svelte-1hyf28w"),w(e,"class","textarea-container svelte-1hyf28w"),ne(e,"loading",n[28])},m(u,d){z(u,e,d),o&&o.m(e,null),B(e,t),B(e,s),ve(s,n[25]),n[66](s),B(e,r),c&&c.m(e,null),l=!0,i||(f=[G(s,"input",n[62]),G(s,"input",n[63]),G(s,"focus",n[64]),G(s,"keydown",n[65])],i=!0)},p(u,d){u[28]?o?d[0]&268435456&&m(o,1):(o=ze(),o.c(),m(o,1),o.m(e,t)):o&&(ee(),y(o,1,1,()=>{o=null}),te()),(!l||d[0]&8)&&w(s,"placeholder",u[3]),(!l||d[0]&64)&&(s.disabled=u[6]),d[0]&33554432&&ve(s,u[25]),u[18]?c?(c.p(u,d),d[0]&262144&&m(c,1)):(c=Fe(u),c.c(),m(c,1),c.m(e,null)):c&&(ee(),y(c,1,1,()=>{c=null}),te()),(!l||d[0]&268435456)&&ne(e,"loading",u[28])},i(u){l||(m(o),m(c),l=!0)},o(u){y(o),y(c),l=!1},d(u){u&&v(e),o&&o.d(),n[66](null),c&&c.d(),i=!1,it(f)}}}function fn(n){let e,t,s,r=n[27]&&Ge(),l=Je(n[15]),i=[];for(let o=0;o<l.length;o+=1)i[o]=We(Xe(n,l,o));const f=o=>y(i[o],1,1,()=>{i[o]=null});return{c(){e=O("div"),r&&r.c(),t=Z();for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=S(o,"DIV",{class:!0});var c=L(e);r&&r.l(c),t=x(c);for(let u=0;u<i.length;u+=1)i[u].l(c);c.forEach(v),this.h()},h(){w(e,"class","dialogue-container svelte-1hyf28w"),ne(e,"loading",n[27])},m(o,c){z(o,e,c),r&&r.m(e,null),B(e,t);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);n[61](e),s=!0},p(o,c){if(o[27]?r?c[0]&134217728&&m(r,1):(r=Ge(),r.c(),m(r,1),r.m(e,t)):r&&(ee(),y(r,1,1,()=>{r=null}),te()),c[0]&1690141262|c[1]&31){l=Je(o[15]);let u;for(u=0;u<l.length;u+=1){const d=Xe(o,l,u);i[u]?(i[u].p(d,c),m(i[u],1)):(i[u]=We(d),i[u].c(),m(i[u],1),i[u].m(e,null))}for(ee(),u=l.length;u<i.length;u+=1)f(u);te()}(!s||c[0]&134217728)&&ne(e,"loading",o[27])},i(o){if(!s){m(r);for(let c=0;c<l.length;c+=1)m(i[c]);s=!0}},o(o){y(r),i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)y(i[c]);s=!1},d(o){o&&v(e),r&&r.d(),jt(i,o),n[61](null)}}}function ze(n){let e,t='<div class="loading-spinner svelte-1hyf28w"></div> <div class="loading-text svelte-1hyf28w">Converting to plain text...</div>',s,r;return{c(){e=O("div"),e.innerHTML=t,this.h()},l(l){e=S(l,"DIV",{class:!0,"data-svelte-h":!0}),ot(e)!=="svelte-1f7wytn"&&(e.innerHTML=t),this.h()},h(){w(e,"class","loading-overlay svelte-1hyf28w")},m(l,i){z(l,e,i),r=!0},i(l){r||(l&&Te(()=>{r&&(s||(s=de(e,_e,{duration:200},!0)),s.run(1))}),r=!0)},o(l){l&&(s||(s=de(e,_e,{duration:200},!1)),s.run(0)),r=!1},d(l){l&&v(e),l&&s&&s.end()}}}function Fe(n){let e,t,s,r;return t=new rt({props:{choices:n[2].map($e),filtered_indices:n[21].map(n[67]),active_index:n[21].map(n[68])[n[20]],show_options:!0}}),t.$on("change",n[69]),{c(){e=O("div"),le(t.$$.fragment),this.h()},l(l){e=S(l,"DIV",{id:!0,class:!0});var i=L(e);se(t.$$.fragment,i),i.forEach(v),this.h()},h(){w(e,"id","tag-menu"),w(e,"class","tag-menu-plain-text svelte-1hyf28w")},m(l,i){z(l,e,i),ie(t,e,null),r=!0},p(l,i){const f={};i[0]&4&&(f.choices=l[2].map($e)),i[0]&2097156&&(f.filtered_indices=l[21].map(l[67])),i[0]&3145732&&(f.active_index=l[21].map(l[68])[l[20]]),t.$set(f)},i(l){r||(m(t.$$.fragment,l),l&&Te(()=>{r&&(s||(s=de(e,_e,{duration:100},!0)),s.run(1))}),r=!0)},o(l){y(t.$$.fragment,l),l&&(s||(s=de(e,_e,{duration:100},!1)),s.run(0)),r=!1},d(l){l&&v(e),oe(t),l&&s&&s.end()}}}function Ge(n){let e,t='<div class="loading-spinner svelte-1hyf28w"></div> <div class="loading-text svelte-1hyf28w">Converting to dialogue format...</div>',s,r;return{c(){e=O("div"),e.innerHTML=t,this.h()},l(l){e=S(l,"DIV",{class:!0,"data-svelte-h":!0}),ot(e)!=="svelte-nm3yad"&&(e.innerHTML=t),this.h()},h(){w(e,"class","loading-overlay svelte-1hyf28w")},m(l,i){z(l,e,i),r=!0},i(l){r||(l&&Te(()=>{r&&(s||(s=de(e,_e,{duration:200},!0)),s.run(1))}),r=!0)},o(l){l&&(s||(s=de(e,_e,{duration:200},!1)),s.run(0)),r=!1},d(l){l&&v(e),l&&s&&s.end()}}}function un(n){let e,t,s;function r(f){n[47](f,n[77])}function l(){return n[48](n[79],n[77])}let i={choices:n[1].map(Ze),show_label:!1,container:!0,label:""};return n[77].speaker!==void 0&&(i.value=n[77].speaker),e=new en({props:i}),be.push(()=>Oe(e,"value",r)),e.$on("change",l),{c(){le(e.$$.fragment)},l(f){se(e.$$.fragment,f)},m(f,o){ie(e,f,o),s=!0},p(f,o){n=f;const c={};o[0]&2&&(c.choices=n[1].map(Ze)),!t&&o[0]&32768&&(t=!0,c.value=n[77].speaker,Se(()=>t=!1)),e.$set(c)},i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){y(e.$$.fragment,f),s=!1},d(f){oe(e,f)}}}function cn(n){let e,t,s;function r(){n[46].call(e,n[78],n[79])}return{c(){e=O("textarea"),this.h()},l(l){e=S(l,"TEXTAREA",{rows:!0,class:!0}),L(e).forEach(v),this.h()},h(){e.disabled=n[6],w(e,"rows","1"),e.readOnly=!0,w(e,"class","svelte-1hyf28w")},m(l,i){z(l,e,i),ve(e,n[77].speaker),t||(s=G(e,"input",r),t=!0)},p(l,i){n=l,i[0]&64&&(e.disabled=n[6]),i[0]&32768&&ve(e,n[77].speaker)},i:pe,o:pe,d(l){l&&v(e),t=!1,s()}}}function Ke(n){let e,t,s,r;return t=new rt({props:{choices:n[2].map(xe),filtered_indices:n[21].map(n[56]),active_index:n[21].map(n[57])[n[20]],show_options:!0,offset_from_top:n[23],from_top:!0}}),t.$on("change",n[58]),{c(){e=O("div"),le(t.$$.fragment),this.h()},l(l){e=S(l,"DIV",{id:!0,class:!0});var i=L(e);se(t.$$.fragment,i),i.forEach(v),this.h()},h(){w(e,"id","tag-menu"),w(e,"class","tag-menu svelte-1hyf28w")},m(l,i){z(l,e,i),ie(t,e,null),r=!0},p(l,i){const f={};i[0]&4&&(f.choices=l[2].map(xe)),i[0]&2097156&&(f.filtered_indices=l[21].map(l[56])),i[0]&3145732&&(f.active_index=l[21].map(l[57])[l[20]]),i[0]&8388608&&(f.offset_from_top=l[23]),t.$set(f)},i(l){r||(m(t.$$.fragment,l),l&&Te(()=>{r&&(s||(s=de(e,_e,{duration:100},!0)),s.run(1))}),r=!0)},o(l){y(t.$$.fragment,l),l&&(s||(s=de(e,_e,{duration:100},!1)),s.run(0)),r=!1},d(l){l&&v(e),oe(t),l&&s&&s.end()}}}function Qe(n){let e,t,s,r,l,i;s=new xt({});function f(){return n[59](n[79])}return{c(){e=O("div"),t=O("button"),le(s.$$.fragment),this.h()},l(o){e=S(o,"DIV",{class:!0});var c=L(e);t=S(c,"BUTTON",{class:!0,"aria-label":!0});var u=L(t);se(s.$$.fragment,u),u.forEach(v),c.forEach(v),this.h()},h(){w(t,"class","add-button svelte-1hyf28w"),w(t,"aria-label","Add new line"),t.disabled=n[6],w(e,"class","svelte-1hyf28w"),ne(e,"action-column",n[79]==0),ne(e,"hidden",n[6])},m(o,c){z(o,e,c),B(e,t),ie(s,t,null),r=!0,l||(i=G(t,"click",f),l=!0)},p(o,c){n=o,(!r||c[0]&64)&&(t.disabled=n[6]),(!r||c[0]&64)&&ne(e,"hidden",n[6])},i(o){r||(m(s.$$.fragment,o),r=!0)},o(o){y(s.$$.fragment,o),r=!1},d(o){o&&v(e),oe(s),l=!1,i()}}}function We(n){let e,t,s,r,l,i,f,o,c=n[79],u,d,b,E,U,P,W,T,h,k;const p=[cn,un],M=[];function J(A,C){return A[6]?0:1}s=J(n),r=M[s]=p[s](n);function F(){return n[49](n[77])}function R(){n[51].call(o,n[78],n[79])}function Y(...A){return n[52](n[79],...A)}function N(...A){return n[53](n[79],...A)}function K(...A){return n[54](n[79],...A)}const $=()=>n[55](o,c),ge=()=>n[55](null,c);let D=n[18]&&n[19]===n[79]&&Ke(n),I=(n[9]==null||n[9]&&n[79]<n[9]-1)&&Qe(n);P=new $t({});function X(){return n[60](n[79])}return{c(){e=O("div"),t=O("div"),r.c(),l=Z(),i=O("div"),f=O("div"),o=O("textarea"),u=Z(),D&&D.c(),d=Z(),I&&I.c(),b=Z(),E=O("div"),U=O("button"),le(P.$$.fragment),W=Z(),this.h()},l(A){e=S(A,"DIV",{class:!0,style:!0});var C=L(e);t=S(C,"DIV",{class:!0,role:!0,tabindex:!0});var _=L(t);r.l(_),_.forEach(v),l=x(C),i=S(C,"DIV",{class:!0});var re=L(i);f=S(re,"DIV",{class:!0});var me=L(f);o=S(me,"TEXTAREA",{placeholder:!0,rows:!0,class:!0}),L(o).forEach(v),u=x(me),D&&D.l(me),me.forEach(v),re.forEach(v),d=x(C),I&&I.l(C),b=x(C),E=S(C,"DIV",{class:!0});var Ce=L(E);U=S(Ce,"BUTTON",{class:!0,"aria-label":!0});var he=L(U);se(P.$$.fragment,he),he.forEach(v),Ce.forEach(v),W=x(C),C.forEach(v),this.h()},h(){w(t,"class","speaker-column svelte-1hyf28w"),w(t,"role","button"),w(t,"tabindex","0"),w(o,"placeholder",n[3]),o.disabled=n[6],w(o,"rows","1"),w(o,"class","svelte-1hyf28w"),w(f,"class","input-container svelte-1hyf28w"),w(i,"class","text-column svelte-1hyf28w"),w(U,"class","delete-button svelte-1hyf28w"),w(U,"aria-label","Remove current line"),U.disabled=n[6],w(E,"class","action-column svelte-1hyf28w"),ne(E,"hidden",n[6]||n[79]==0),w(e,"class","dialogue-line svelte-1hyf28w"),Ne(e,"--speaker-bg-color",n[6]&&(n[26]===null||n[26]===n[77].speaker)&&n[29][n[77].speaker]||"transparent")},m(A,C){z(A,e,C),B(e,t),M[s].m(t,null),B(e,l),B(e,i),B(i,f),B(f,o),ve(o,n[77].text),$(),B(f,u),D&&D.m(f,null),B(e,d),I&&I.m(e,null),B(e,b),B(e,E),B(E,U),ie(P,U,null),B(e,W),T=!0,h||(k=[G(t,"mouseenter",F),G(t,"mouseleave",n[50]),G(o,"input",R),G(o,"input",Y),G(o,"focus",N),G(o,"keydown",K),G(U,"click",X)],h=!0)},p(A,C){n=A;let _=s;s=J(n),s===_?M[s].p(n,C):(ee(),y(M[_],1,1,()=>{M[_]=null}),te(),r=M[s],r?r.p(n,C):(r=M[s]=p[s](n),r.c()),m(r,1),r.m(t,null)),(!T||C[0]&8)&&w(o,"placeholder",n[3]),(!T||C[0]&64)&&(o.disabled=n[6]),C[0]&32768&&ve(o,n[77].text),c!==n[79]&&(ge(),c=n[79],$()),n[18]&&n[19]===n[79]?D?(D.p(n,C),C[0]&786432&&m(D,1)):(D=Ke(n),D.c(),m(D,1),D.m(f,null)):D&&(ee(),y(D,1,1,()=>{D=null}),te()),n[9]==null||n[9]&&n[79]<n[9]-1?I?(I.p(n,C),C[0]&512&&m(I,1)):(I=Qe(n),I.c(),m(I,1),I.m(e,b)):I&&(ee(),y(I,1,1,()=>{I=null}),te()),(!T||C[0]&64)&&(U.disabled=n[6]),(!T||C[0]&64)&&ne(E,"hidden",n[6]||n[79]==0),(!T||C[0]&604012608)&&Ne(e,"--speaker-bg-color",n[6]&&(n[26]===null||n[26]===n[77].speaker)&&n[29][n[77].speaker]||"transparent")},i(A){T||(m(r),m(D),m(I),m(P.$$.fragment,A),T=!0)},o(A){y(r),y(D),y(I),y(P.$$.fragment,A),T=!1},d(A){A&&v(e),M[s].d(),ge(),D&&D.d(),I&&I.d(),oe(P),h=!1,it(k)}}}function Ye(n){let e,t,s,r,l,i;return s=new Kt({}),{c(){e=O("div"),t=O("button"),le(s.$$.fragment),this.h()},l(f){e=S(f,"DIV",{class:!0});var o=L(e);t=S(o,"BUTTON",{class:!0});var c=L(t);se(s.$$.fragment,c),c.forEach(v),o.forEach(v),this.h()},h(){w(t,"class","submit-button svelte-1hyf28w"),t.disabled=n[6],w(e,"class","submit-container svelte-1hyf28w")},m(f,o){z(f,e,o),B(e,t),ie(s,t,null),r=!0,l||(i=G(t,"click",n[39]),l=!0)},p(f,o){(!r||o[0]&64)&&(t.disabled=f[6])},i(f){r||(m(s.$$.fragment,f),r=!0)},o(f){y(s.$$.fragment,f),r=!1},d(f){f&&v(e),oe(s),l=!1,i()}}}function _n(n){let e,t,s,r,l,i,f,o,c,u,d,b=n[7]&&n[10]&&je(n);s=new Gt({props:{show_label:n[7],info:n[5],$$slots:{default:[rn]},$$scope:{ctx:n}}});let E=n[1].length!==0&&n[12]==="both"&&qe(n);const U=[fn,an],P=[];function W(h,k){return!h[14]&&h[12]!=="text"?0:h[14]&&h[12]!=="dialogue"?1:-1}~(i=W(n))&&(f=P[i]=U[i](n));let T=n[11]&&!n[6]&&Ye(n);return{c(){e=O("label"),b&&b.c(),t=Z(),le(s.$$.fragment),r=Z(),E&&E.c(),l=Z(),f&&f.c(),o=Z(),T&&T.c(),this.h()},l(h){e=S(h,"LABEL",{class:!0});var k=L(e);b&&b.l(k),t=x(k),se(s.$$.fragment,k),r=x(k),E&&E.l(k),l=x(k),f&&f.l(k),o=x(k),T&&T.l(k),k.forEach(v),this.h()},h(){w(e,"class","svelte-1hyf28w"),ne(e,"container",n[8])},m(h,k){z(h,e,k),b&&b.m(e,null),B(e,t),ie(s,e,null),B(e,r),E&&E.m(e,null),B(e,l),~i&&P[i].m(e,null),B(e,o),T&&T.m(e,null),c=!0,u||(d=G(window,"click",n[36]),u=!0)},p(h,k){h[7]&&h[10]?b?(b.p(h,k),k[0]&1152&&m(b,1)):(b=je(h),b.c(),m(b,1),b.m(e,t)):b&&(ee(),y(b,1,1,()=>{b=null}),te());const p={};k[0]&128&&(p.show_label=h[7]),k[0]&32&&(p.info=h[5]),k[0]&16|k[2]&262144&&(p.$$scope={dirty:k,ctx:h}),s.$set(p),h[1].length!==0&&h[12]==="both"?E?(E.p(h,k),k[0]&4098&&m(E,1)):(E=qe(h),E.c(),m(E,1),E.m(e,l)):E&&(ee(),y(E,1,1,()=>{E=null}),te());let M=i;i=W(h),i===M?~i&&P[i].p(h,k):(f&&(ee(),y(P[M],1,1,()=>{P[M]=null}),te()),~i?(f=P[i],f?f.p(h,k):(f=P[i]=U[i](h),f.c()),m(f,1),f.m(e,o)):f=null),h[11]&&!h[6]?T?(T.p(h,k),k[0]&2112&&m(T,1)):(T=Ye(h),T.c(),m(T,1),T.m(e,null)):T&&(ee(),y(T,1,1,()=>{T=null}),te()),(!c||k[0]&256)&&ne(e,"container",h[8])},i(h){c||(m(b),m(s.$$.fragment,h),m(E),m(f),m(T),c=!0)},o(h){y(b),y(s.$$.fragment,h),y(E),y(f),y(T),c=!1},d(h){h&&v(e),b&&b.d(),oe(s),E&&E.d(),~i&&P[i].d(),T&&T.d(),u=!1,d()}}}function hn(n,e){const t=n.lastIndexOf(":",e-1);return t>=0?n.substring(t+1,e):""}const Ze=n=>[n,n],xe=(n,e)=>[n,e],$e=(n,e)=>[n,e];function dn(n,e,t){let{speakers:s=[]}=e,{tags:r=[]}=e,{value:l=[]}=e,{value_is_output:i=!1}=e,{placeholder:f=void 0}=e,{label:o}=e,{info:c=void 0}=e,{disabled:u=!1}=e,{show_label:d=!0}=e,{container:b=!0}=e,{max_lines:E=void 0}=e,{show_copy_button:U=!1}=e,{show_submit_button:P=!0}=e,{color_map:W=null}=e,{ui_mode:T="both"}=e,h=T==="text",{server:k}=e,p=[];l&&l.length&&typeof l!="string"?p=[...l]:l&&typeof l!="string"&&(p=[{speaker:`${s.length?s[0]:""}`,text:""}]);let M,J=!1,F=-1,R=0,Y=[],N=[],K,$=JSON.stringify(l),ge=0,D=!1,I,X="",A=null,C=!1,_=!1,re=!1;const me=["red","green","blue","yellow","purple","teal","orange","cyan","lime","pink"],Ce={red:"rgba(254, 202, 202, 0.7)",green:"rgba(209, 250, 229, 0.7)",blue:"rgba(219, 234, 254, 0.7)",yellow:"rgba(254, 243, 199, 0.7)",purple:"rgba(233, 213, 255, 0.7)",teal:"rgba(204, 251, 241, 0.7)",orange:"rgba(254, 215, 170, 0.7)",cyan:"rgba(207, 250, 254, 0.7)",lime:"rgba(217, 249, 157, 0.7)",pink:"rgba(252, 231, 243, 0.7)"};let he={};s.length===0&&(h=!0,l="");function Re(a){const g=s.length>0?s[0]:"";t(15,p=[...p.slice(0,a+1),{speaker:g,text:""},...p.slice(a+1)]),ke().then(()=>{N[a+1]&&N[a+1].focus()})}function Pe(a){t(15,p=[...p.slice(0,a),...p.slice(a+1)])}function De(a,g,V){t(15,p[a][g]=V,p),t(15,p=[...p])}function ye(a,g){const V=a.target||HTMLTextAreaElement;V&&!N[g]&&t(16,N[g]=V,N);const Q=V.selectionStart||0,ae=V.value;let fe=!1,ue=-1;if(ae[Q-1]===":"){t(19,F=g),ue=Q;const j=hn(ae,Q);t(21,Y=r.filter(q=>j===""||q.toLowerCase().includes(j.toLowerCase()))),fe=Y.length>0,t(20,R=0)}else{const j=ae.lastIndexOf(":",Q-1);if(j>=0&&!ae.substring(j+1,Q).includes(" ")){t(19,F=g),ue=j+1;const q=ae.substring(j+1,Q);t(21,Y=r.filter(ce=>q===""||ce.toLowerCase().includes(q.toLowerCase()))),fe=Y.length>0,t(20,R=0)}}if(fe&&ue!==-1){t(18,J=!0);const j=V.getBoundingClientRect();if(M){const q=M.getBoundingClientRect();t(23,ge=q.top+j.height*(g+1.5))}}else t(18,J=!1)}async function Ae(){const a=Y[R];if(a){let g,V;h?(V=K,g=X):(V=N[F],g=p[F].text);const Q=(V==null?void 0:V.selectionStart)||0,ae=g.lastIndexOf(":",Q-1);if(ae>=0){const fe=g.substring(0,ae),ue=g.substring(Q);if(h){const j=`${fe}${a} ${ue}`;t(25,X=j),s.length===0?t(0,l=j):t(0,l=await k.unformat({text:j})),ke().then(()=>{if(K){const q=fe.length+a.length+1;K.setSelectionRange(q,q),K.focus()}})}else{const j=fe.replace(/\[S\d+\]/g,"").trim(),q=`${j}${a} ${ue}`;De(F,"text",q),ke().then(()=>{const ce=N[F];if(ce){const we=j.length+a.length+1;ce.setSelectionRange(we,we),ce.focus()}})}}t(18,J=!1),t(20,R=0)}}async function Be(a){const g=r[a.detail.target.dataset.index];if(g){let V,Q;h?(Q=K,V=X):(Q=N[F],V=p[F].text);const ae=(Q==null?void 0:Q.selectionStart)||0,fe=V.lastIndexOf(":",ae-1);if(fe>=0){const ue=V.substring(0,fe),j=V.substring(ae);if(h){const q=`${ue}${g} ${j}`;t(25,X=q),s.length===0?t(0,l=q):t(0,l=await k.unformat({text:q})),ke().then(()=>{if(K){const ce=ue.length+g.length+1;K.setSelectionRange(ce,ce),K.focus()}})}else{const q=ue.replace(/\[S\d+\]/g,"").trim(),ce=`${q}${g} ${j}`;De(F,"text",ce),ke().then(()=>{const we=N[F];if(we){const He=q.length+g.length+1;we.setSelectionRange(He,He),we.focus()}})}}t(18,J=!1),t(20,R=0)}}function at(a){if(J){const g=a.target,V=document.getElementById("tag-menu");V&&!V.contains(g)&&t(18,J=!1)}}const Ie=st();function ft(){Ie("change",l),i||Ie("input")}function ut(a){s.length!==0&&(t(43,re=!0),t(0,l=[...a]))}async function Ee(a){return typeof a=="string"?a:await k.format(a)}async function ct(){if("clipboard"in navigator){const a=await Ee(l);await navigator.clipboard.writeText(a),Ie("copy",{value:a}),_t()}}function _t(){t(24,D=!0),I&&clearTimeout(I),I=setTimeout(()=>{t(24,D=!1)},1e3)}async function ht(){h&&t(0,l=await k.unformat({text:X})),Ie("submit")}Jt(async()=>{if(typeof l=="string")t(25,X=l);else if(l&&l.length>0){const a=await Ee(l);t(25,X=a)}else t(25,X="")});function dt(a){h=a,t(14,h)}const gt=async a=>{if(a.detail.checked){t(28,_=!0);try{t(25,X=await Ee(p))}finally{t(28,_=!1)}}else{t(27,C=!0);try{t(0,l=await k.unformat({text:X})),t(15,p=[...l])}finally{t(27,C=!1)}}};function mt(a,g){a[g].speaker=this.value,t(15,p),t(0,l),t(42,$),t(43,re),t(14,h)}function bt(a,g){n.$$.not_equal(g.speaker,a)&&(g.speaker=a,t(15,p),t(0,l),t(42,$),t(43,re),t(14,h))}const wt=(a,g)=>De(a,"speaker",g.speaker),kt=a=>u&&t(26,A=a.speaker),pt=()=>u&&t(26,A=null);function vt(a,g){a[g].text=this.value,t(15,p),t(0,l),t(42,$),t(43,re),t(14,h)}const yt=(a,g)=>ye(g,a),Et=(a,g)=>ye(g,a),Tt=(a,g)=>{g.key==="Escape"&&J?(t(18,J=!1),t(20,R=0),g.preventDefault()):J&&F===a&&(g.key==="ArrowDown"?(t(20,R=Math.min(R+1,Y.length-1)),g.preventDefault()):g.key==="ArrowUp"?(t(20,R=Math.max(R-1,0)),g.preventDefault()):g.key==="Enter"&&(Y[R]&&Ae(),g.preventDefault()))};function Ct(a,g){be[a?"unshift":"push"](()=>{N[g]=a,t(16,N),t(15,p),t(0,l),t(42,$),t(43,re),t(14,h)})}const Dt=a=>r.indexOf(a),It=a=>r.indexOf(a),Ot=a=>Be(a),St=a=>Re(a),At=a=>Pe(a);function Bt(a){be[a?"unshift":"push"](()=>{M=a,t(17,M)})}function Nt(){X=this.value,t(25,X),t(0,l),t(42,$),t(43,re),t(14,h),t(15,p)}const Vt=a=>{ye(a,0)},Lt=a=>ye(a,0),Mt=a=>{a.key==="Escape"&&J?(t(18,J=!1),t(20,R=0),a.preventDefault()):J&&(a.key==="ArrowDown"?(t(20,R=Math.min(R+1,Y.length-1)),a.preventDefault()):a.key==="ArrowUp"?(t(20,R=Math.max(R-1,0)),a.preventDefault()):a.key==="Enter"&&(Y[R]&&Ae(),a.preventDefault()))};function Rt(a){be[a?"unshift":"push"](()=>{K=a,t(22,K)})}const Pt=a=>r.indexOf(a),Ht=a=>r.indexOf(a),Ut=a=>Be(a);return n.$$set=a=>{"speakers"in a&&t(1,s=a.speakers),"tags"in a&&t(2,r=a.tags),"value"in a&&t(0,l=a.value),"value_is_output"in a&&t(40,i=a.value_is_output),"placeholder"in a&&t(3,f=a.placeholder),"label"in a&&t(4,o=a.label),"info"in a&&t(5,c=a.info),"disabled"in a&&t(6,u=a.disabled),"show_label"in a&&t(7,d=a.show_label),"container"in a&&t(8,b=a.container),"max_lines"in a&&t(9,E=a.max_lines),"show_copy_button"in a&&t(10,U=a.show_copy_button),"show_submit_button"in a&&t(11,P=a.show_submit_button),"color_map"in a&&t(41,W=a.color_map),"ui_mode"in a&&t(12,T=a.ui_mode),"server"in a&&t(13,k=a.server)},n.$$.update=()=>{n.$$.dirty[0]&2|n.$$.dirty[1]&1024&&(W?t(29,he={...W}):(t(29,he={}),s.forEach((a,g)=>{const V=me[g%me.length];t(29,he[a]=Ce[V],he)}))),n.$$.dirty[0]&49153|n.$$.dirty[1]&6144&&JSON.stringify(l)!==$&&(l==null&&t(15,p=[]),t(42,$=JSON.stringify(l)),typeof l=="string"?t(25,X=l):typeof l=="object"&&Array.isArray(l)&&(t(15,p=[...l]),(!re||h)&&Ee(p).then(a=>{t(25,X=a)})),t(43,re=!1),ft()),n.$$.dirty[0]&98304&&(p.length>N.length?t(16,N=[...N,...Array(p.length-N.length).fill(null)]):p.length<N.length&&t(16,N=N.slice(0,p.length)),ke().then(()=>{N.forEach(a=>{a&&a instanceof HTMLTextAreaElement&&(a.style.height="auto",a.style.height=a.scrollHeight+"px")})})),n.$$.dirty[0]&32768&&ut(p)},[l,s,r,f,o,c,u,d,b,E,U,P,T,k,h,p,N,M,J,F,R,Y,K,ge,D,X,A,C,_,he,Re,Pe,De,ye,Ae,Be,at,Ee,ct,ht,i,W,$,re,dt,gt,mt,bt,wt,kt,pt,vt,yt,Et,Tt,Ct,Dt,It,Ot,St,At,Bt,Nt,Vt,Lt,Mt,Rt,Pt,Ht,Ut]}class gn extends Ve{constructor(e){super(),Le(this,e,dn,_n,Me,{speakers:1,tags:2,value:0,value_is_output:40,placeholder:3,label:4,info:5,disabled:6,show_label:7,container:8,max_lines:9,show_copy_button:10,show_submit_button:11,color_map:41,ui_mode:12,server:13},null,[-1,-1,-1])}}const mn=gn;function et(n){let e,t;const s=[{autoscroll:n[2].autoscroll},{i18n:n[2].i18n},n[18]];let r={};for(let l=0;l<s.length;l+=1)r=qt(r,s[l]);return e=new Zt({props:r}),e.$on("clear_status",n[22]),{c(){le(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,i){ie(e,l,i),t=!0},p(l,i){const f=i[0]&262148?zt(s,[i[0]&4&&{autoscroll:l[2].autoscroll},i[0]&4&&{i18n:l[2].i18n},i[0]&262144&&Ft(l[18])]):{};e.$set(f)},i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){y(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function bn(n){let e,t,s,r,l,i=n[18]&&et(n);function f(u){n[23](u)}function o(u){n[24](u)}let c={label:n[4],info:n[7],show_label:n[12],max_lines:n[13],show_copy_button:n[17],container:n[14],speakers:n[5],tags:n[6],placeholder:n[8],show_submit_button:n[20],server:n[3],ui_mode:n[21],disabled:!n[19]};return n[0]!==void 0&&(c.value=n[0]),n[1]!==void 0&&(c.value_is_output=n[1]),t=new mn({props:c}),be.push(()=>Oe(t,"value",f)),be.push(()=>Oe(t,"value_is_output",o)),t.$on("change",n[25]),t.$on("input",n[26]),t.$on("submit",n[27]),t.$on("blur",n[28]),t.$on("select",n[29]),t.$on("focus",n[30]),t.$on("copy",n[31]),{c(){i&&i.c(),e=Z(),le(t.$$.fragment)},l(u){i&&i.l(u),e=x(u),se(t.$$.fragment,u)},m(u,d){i&&i.m(u,d),z(u,e,d),ie(t,u,d),l=!0},p(u,d){u[18]?i?(i.p(u,d),d[0]&262144&&m(i,1)):(i=et(u),i.c(),m(i,1),i.m(e.parentNode,e)):i&&(ee(),y(i,1,1,()=>{i=null}),te());const b={};d[0]&16&&(b.label=u[4]),d[0]&128&&(b.info=u[7]),d[0]&4096&&(b.show_label=u[12]),d[0]&8192&&(b.max_lines=u[13]),d[0]&131072&&(b.show_copy_button=u[17]),d[0]&16384&&(b.container=u[14]),d[0]&32&&(b.speakers=u[5]),d[0]&64&&(b.tags=u[6]),d[0]&256&&(b.placeholder=u[8]),d[0]&1048576&&(b.show_submit_button=u[20]),d[0]&8&&(b.server=u[3]),d[0]&2097152&&(b.ui_mode=u[21]),d[0]&524288&&(b.disabled=!u[19]),!s&&d[0]&1&&(s=!0,b.value=u[0],Se(()=>s=!1)),!r&&d[0]&2&&(r=!0,b.value_is_output=u[1],Se(()=>r=!1)),t.$set(b)},i(u){l||(m(i),m(t.$$.fragment,u),l=!0)},o(u){y(i),y(t.$$.fragment,u),l=!1},d(u){u&&v(e),i&&i.d(u),oe(t,u)}}}function wn(n){let e,t;return e=new Yt({props:{visible:n[11],elem_id:n[9],elem_classes:n[10],scale:n[15],min_width:n[16],allow_overflow:!0,padding:n[14],$$slots:{default:[bn]},$$scope:{ctx:n}}}),{c(){le(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,r){ie(e,s,r),t=!0},p(s,r){const l={};r[0]&2048&&(l.visible=s[11]),r[0]&512&&(l.elem_id=s[9]),r[0]&1024&&(l.elem_classes=s[10]),r[0]&32768&&(l.scale=s[15]),r[0]&65536&&(l.min_width=s[16]),r[0]&16384&&(l.padding=s[14]),r[0]&4092415|r[1]&2&&(l.$$scope={dirty:r,ctx:s}),e.$set(l)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function kn(n,e,t){let{gradio:s}=e,{server:r}=e,{label:l="Dialogue"}=e,{speakers:i=[]}=e,{tags:f=[]}=e,{info:o=void 0}=e,{placeholder:c=void 0}=e,{elem_id:u=""}=e,{elem_classes:d=[]}=e,{visible:b=!0}=e,{value:E=[]}=e,{show_label:U}=e,{max_lines:P=void 0}=e,{container:W=!0}=e,{scale:T=null}=e,{min_width:h=void 0}=e,{show_copy_button:k=!1}=e,{loading_status:p=void 0}=e,{value_is_output:M=!1}=e,{interactive:J}=e,{show_submit_button:F=!0}=e,{ui_mode:R="both"}=e;const Y=()=>s.dispatch("clear_status",p);function N(_){E=_,t(0,E)}function K(_){M=_,t(1,M)}const $=()=>s.dispatch("change",E),ge=()=>s.dispatch("input"),D=()=>s.dispatch("submit"),I=()=>s.dispatch("blur"),X=_=>s.dispatch("select",_.detail),A=()=>s.dispatch("focus"),C=_=>s.dispatch("copy",_.detail);return n.$$set=_=>{"gradio"in _&&t(2,s=_.gradio),"server"in _&&t(3,r=_.server),"label"in _&&t(4,l=_.label),"speakers"in _&&t(5,i=_.speakers),"tags"in _&&t(6,f=_.tags),"info"in _&&t(7,o=_.info),"placeholder"in _&&t(8,c=_.placeholder),"elem_id"in _&&t(9,u=_.elem_id),"elem_classes"in _&&t(10,d=_.elem_classes),"visible"in _&&t(11,b=_.visible),"value"in _&&t(0,E=_.value),"show_label"in _&&t(12,U=_.show_label),"max_lines"in _&&t(13,P=_.max_lines),"container"in _&&t(14,W=_.container),"scale"in _&&t(15,T=_.scale),"min_width"in _&&t(16,h=_.min_width),"show_copy_button"in _&&t(17,k=_.show_copy_button),"loading_status"in _&&t(18,p=_.loading_status),"value_is_output"in _&&t(1,M=_.value_is_output),"interactive"in _&&t(19,J=_.interactive),"show_submit_button"in _&&t(20,F=_.show_submit_button),"ui_mode"in _&&t(21,R=_.ui_mode)},[E,M,s,r,l,i,f,o,c,u,d,b,U,P,W,T,h,k,p,J,F,R,Y,N,K,$,ge,D,I,X,A,C]}class In extends Ve{constructor(e){super(),Le(this,e,kn,wn,Me,{gradio:2,server:3,label:4,speakers:5,tags:6,info:7,placeholder:8,elem_id:9,elem_classes:10,visible:11,value:0,show_label:12,max_lines:13,container:14,scale:15,min_width:16,show_copy_button:17,loading_status:18,value_is_output:1,interactive:19,show_submit_button:20,ui_mode:21},null,[-1,-1])}get gradio(){return this.$$.ctx[2]}set gradio(e){this.$$set({gradio:e}),H()}get server(){return this.$$.ctx[3]}set server(e){this.$$set({server:e}),H()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),H()}get speakers(){return this.$$.ctx[5]}set speakers(e){this.$$set({speakers:e}),H()}get tags(){return this.$$.ctx[6]}set tags(e){this.$$set({tags:e}),H()}get info(){return this.$$.ctx[7]}set info(e){this.$$set({info:e}),H()}get placeholder(){return this.$$.ctx[8]}set placeholder(e){this.$$set({placeholder:e}),H()}get elem_id(){return this.$$.ctx[9]}set elem_id(e){this.$$set({elem_id:e}),H()}get elem_classes(){return this.$$.ctx[10]}set elem_classes(e){this.$$set({elem_classes:e}),H()}get visible(){return this.$$.ctx[11]}set visible(e){this.$$set({visible:e}),H()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),H()}get show_label(){return this.$$.ctx[12]}set show_label(e){this.$$set({show_label:e}),H()}get max_lines(){return this.$$.ctx[13]}set max_lines(e){this.$$set({max_lines:e}),H()}get container(){return this.$$.ctx[14]}set container(e){this.$$set({container:e}),H()}get scale(){return this.$$.ctx[15]}set scale(e){this.$$set({scale:e}),H()}get min_width(){return this.$$.ctx[16]}set min_width(e){this.$$set({min_width:e}),H()}get show_copy_button(){return this.$$.ctx[17]}set show_copy_button(e){this.$$set({show_copy_button:e}),H()}get loading_status(){return this.$$.ctx[18]}set loading_status(e){this.$$set({loading_status:e}),H()}get value_is_output(){return this.$$.ctx[1]}set value_is_output(e){this.$$set({value_is_output:e}),H()}get interactive(){return this.$$.ctx[19]}set interactive(e){this.$$set({interactive:e}),H()}get show_submit_button(){return this.$$.ctx[20]}set show_submit_button(e){this.$$set({show_submit_button:e}),H()}get ui_mode(){return this.$$.ctx[21]}set ui_mode(e){this.$$set({ui_mode:e}),H()}}export{mn as BaseDialogue,An as BaseExample,In as default};
//# sourceMappingURL=Index.D1_HfLOu.js.map
